<!DOCTYPE html>
<html layout:decorate="~{layout}">

<head>
    <meta charset="UTF-8">
</head>

<body>

    <div layout:fragment="conteudo" style="width: 100%;">




        <div class="listar-funcionario-box" style="width: 100%;">
            <div style="width: 100%; display: flex; justify-content: center;">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-left: 12px; width: 85%; margin-top: 0px;">
                    <div style="display: flex; align-items: center;">

                        <i class="material-icons"> play_arrow</i>
                        <span style="font-size: 18px; margin-left: 5px;">Lista de funcionários</span>
                    </div>
                    <div>

                        <button class="btn btn-primary" type="button" data-toggle="collapse"
                            data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                            <div
                                style="display: flex; height: 30px; width: 100px; align-items: start; justify-content: space-around;">
                                <div>
                                    Filtrar
                                </div>
                                <i class="material-icons">find_in_page</i>

                            </div>
                        </button>
                    </div>

                </div>
            </div>



            <div style="width: 100%; display: flex; justify-content: center;">

                <div style="width: 85%; margin-top: 20px;">
                    <div style="width: 100%;" class="card collapse">

                        <div class="collapse" id="collapseExample">
                            <div class="card-body">

                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="width: 30%;">
                                        <divv style="display: block;">
                                            <div class="input-group mb-3 col">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="inputGroupSelect01">Buscar
                                                        por</label>
                                                </div>
                                                <select class="custom-select" id="inputGroupSelect01">
                                                    <option selected>Selecione...</option>
                                                    <option value="Nome">Nome</option>
                                                    <option value="Departamento">Departamento</option>
                                                    <option value="Salário">Salário</option>
                                                </select>
                                            </div>
                                    </div>

                                    <div id="parametrosBusca"
                                        style="margin-left: 5px; width: 70%; display: flex; justify-content: center;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <table id="tabela-funcionarios" class="table table-hover">
                        <div id="alert"></div>
                        <thead>
                            <tr>
                                <th scope="col">Nome</th>
                                <th scope="col">Cargo</th>
                                <th scope="col">Salario</th>
                                <th scope="col">Departamento</th>
                                <th scope="col">Endereco</th>
                                <th scope="col">Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row"></th>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>



        <!-- Modal editar -->
        <div class="modal fade" id="modalEditar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Editar Funcionário</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" id="modalBody">



                    </div>

                </div>
            </div>
        </div>


        <!-- filtro  -->
        <script>
            const selectElement = document.getElementById('inputGroupSelect01');
            const campos = document.getElementById('parametrosBusca')

            selectElement.addEventListener('change', function () {

                const selectedValue = selectElement.value;

                if (selectedValue == "Selecione...") {

                    campos.innerHTML = '';
                }

                if (selectedValue == "Nome") {


                    campos.innerHTML = '';
                    campos.innerHTML = `
                        <div style="width: 70%; justify-content:center;">
                            <div class="input-group mb-3">
                                <input type="text" id="nomeBusca" class="form-control" placeholder="Digite um nome" aria-label="Recipient's username" aria-describedby="basic-addon2">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-success" type="button" onclick="buscarPorNome()">Buscar</button>
                                    </div>
                            </div>
                        </div>
                    `;
                }
                if (selectedValue == "Departamento") {


                    campos.innerHTML = '';
                    campos.innerHTML = `
                        <div style="width: 40%; justify-content:center;">
                            <div class="input-group mb-3">

                                <select class="custom-select" id="departamentos"> </select>

                                <div class="input-group-append">
                                        <button class="btn btn-outline-success" type="button" onclick="buscarPorDepartamento()">Buscar</button>
                                    </div>
                            </div>
                        </div>
                    `;

                    buscarDepartamentos();



                }

                if (selectedValue == "Salário") {


                    campos.innerHTML = '';
                    campos.innerHTML = `
                                <div style="width: 73%; justify-content:center;">
                                  
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text" id="inputGroup-sizing-default">De:</span>
                                        </div>
                                        <input type="text" id="salario1" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                                        
                                        <div class="input-group-prepend">
                                            <span class="input-group-text" id="inputGroup-sizing-default">Até:</span>
                                        </div>
                                        <input type="text" id="salario2" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                                        
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-success" type="button" onclick="buscarPorSalario()">Buscar</button>
                                        </div>

                                    </div>



                                </div>
                            `;

                    var salarioInput1 = document.getElementById('salario1');
                    salarioInput1.addEventListener('input', mascaraSalario);

                    var salarioInput2 = document.getElementById('salario2');
                    salarioInput2.addEventListener('input', mascaraSalario);


                }


            });

            function buscarDepartamentos() {

                fetch(host+'/api/departamentos')
                    .then(response => {
                        if (response.ok) {
                            response.json().then(departamentos => {

                                adicionarDepartamentos(departamentos);
                            });

                        }
                    })
                    .catch(error => {
                    });
            }

            function adicionarDepartamentos(departamentos) {
                var select = document.getElementById('departamentos');
                select.innerHTML = '';
                var lin = document.createElement('option')
                lin.textContent = "Selecione...";
                lin.selected = true;
                lin.disabled = true;
                select.appendChild(lin);

                departamentos.forEach(departamento => {

                    lin = document.createElement('option');
                    lin.textContent = departamento.nome;
                    lin.value = departamento.id;
                    select.appendChild(lin);
                });
            }

            function mascaraSalario(event) {
                var input = event.target;
                var value = input.value.replace(/\D/g, ''); // Remove todos os não-dígitos

                // Formata o valor como moeda brasileira
                var formattedValue = "R$ " + (value / 100).toLocaleString("pt-BR", {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });

                input.value = formattedValue;
            }

            function buscarPorNome() {

                var nomeBusca = document.getElementById('nomeBusca').value;
                fetch(host+"/api/funcionarios/buscar-por-nome?nome=" + nomeBusca)
                    .then(response => {

                        if (response.ok) {

                            response.json().then(funcionarios => {

                                rederizarTabela(funcionarios);
                            })
                        } else {

                            response.json().then(responseMessage => {
                                if (responseMessage.StatusCode == "400") {

                                    mostrarMensagem("warning", "Não há funcionários com este nome")
                                }
                            })
                        }
                    }).catch(error => { });
                limparTabela();
            }

            function buscarPorDepartamento() {

                var departamentoBusca = document.getElementById('departamentos').value;
                fetch(host+"/api/funcionarios/buscar-por-departamento?id=" + departamentoBusca)
                    .then(response => {

                        if (response.ok) {

                            response.json().then(funcionarios => {

                                rederizarTabela(funcionarios);
                            })
                        } else {

                            response.json().then(responseMessage => {
                                if (responseMessage.StatusCode == "400") {

                                    mostrarMensagem("warning", "Não há funcionários neste departamento")
                                }
                            })
                        }
                    }).catch(error => { });
                limparTabela();
            }

            function buscarPorSalario() {

                var salario1 = parseFloat(document.getElementById('salario1').value.replace(/[^\d,]/g, '').replace(',', '.'));
                var salario2 = parseFloat(document.getElementById('salario2').value.replace(/[^\d,]/g, '').replace(',', '.'));


                fetch(host+"/api/funcionarios/buscar-por-salario?salario1=" + salario1 + "&salario2=" + salario2)
                    .then(response => {

                        if (response.ok) {

                            response.json().then(funcionarios => {

                                rederizarTabela(funcionarios);
                            })
                        } else {

                            response.json().then(responseMessage => {
                                if (responseMessage.StatusCode == "400") {

                                    mostrarMensagem("warning", "Não há funcionários com está faixa de salário")
                                }
                            })
                        }
                    }).catch(error => { });
                limparTabela();
            }




        </script>


        <!-- editar Funcionario -->
        <script>
            function atualizarFuncionario() {

                if (validarFormulario()) {

                    var id = parseFloat(document.getElementById('id').value);

                    var nome = document.getElementById('nome').value;
                    var salario = parseFloat(document.getElementById('salario').value.replace(/[^\d,]/g, '').replace(',', '.'));
                    var cargoId = parseFloat(document.getElementById('cargo').value);

                    var enderecoId = parseFloat(document.getElementById('enderecoId').value);

                    var logradouro = document.getElementById('logradouro').value;
                    var numero = parseInt(document.getElementById('numero').value);
                    var bairro = document.getElementById('bairro').value;
                    var cidade = document.getElementById('cidade').value;
                    var cep = document.getElementById('cep').value;
                    var uf = document.getElementById('uf').value;


                    if (uf == "Selecione...") {
                        uf = null;
                    }

                    var data = {

                        id: id,
                        nome: nome,
                        salario: salario,
                        cargoId: cargoId,
                        endereco: {
                            id: enderecoId,
                            logradouro: logradouro,
                            numero: numero,
                            bairro: bairro,
                            cidade: cidade,
                            cep: cep,
                            uf: uf
                        }

                    };

                
                    var message;
                    var alertType;

                    $('#modalEditar').modal('hide');
                    fetch(host+"/api/funcionarios", {
                        method: 'PUT', // ou outro método HTTP apropriado
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    }).then(response => {

                        if (response.ok) {

                            message = "Funcionário atualizado";
                            alertType = "alert-success";
                            listarFuncionarios();

                        } else {

                            message = "Não foi possivel atualizar";
                            alertType = "alert-danger";
                        }

                        document.getElementById("alert").innerHTML = message + '  ' + alertType;


                        document.getElementById("alert").innerHTML = '<div class="alert ' + alertType + ' alert-dismissible fade show" role="alert"> ' +
                            '<strong>' + message + '</strong>' +
                            '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' +
                            '<span aria-hidden="true">&times;</span>' +
                            '</button>  </div>';


                    }).catch(error => {


                        location.reload(true);
                    });






                }

            }

            function validarFormulario() {

                var nome = document.getElementById('nome');
                var salario = document.getElementById('salario');
                var cargoId = document.getElementById('cargo');
                var logradouro = document.getElementById('logradouro');
                var numero = document.getElementById('numero');
                var bairro = document.getElementById('bairro');
                var cidade = document.getElementById('cidade');
                var cep = document.getElementById('cep');
                var uf = document.getElementById('uf');

                var valido = true;

                var mensagem = document.getElementById("mensagemNome");
                if (nome.value == null || nome.value.trim() == "") {
                    nome.classList.add("border-danger");
                    mensagem.textContent = "Digite um nome válido";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {

                    nome.classList.remove("border-danger");
                    mensagem.textContent = "";
                }

                mensagem = document.getElementById("mensagemSalario");
                if (salario.value == null || salario.value.trim() == "") {
                    salario.classList.add("border-danger");
                    mensagem.textContent = "Digite um salário válido";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {
                    salario.classList.remove("border-danger");
                    mensagem.textContent = "";
                }

                mensagem = document.getElementById("mensagemCargo");
                if (cargoId.value == "Selecione..." || cargoId.value.trim() == "") {
                    cargoId.classList.add("border-danger");
                    mensagem.textContent = "Selecione um cargo";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {
                    cargoId.classList.remove("border-danger");
                    mensagem.textContent = "";
                }

                mensagem = document.getElementById("mensagemLogradouro");
                if (logradouro.value == null || logradouro.value.trim() == "") {
                    logradouro.classList.add("border-danger");
                    mensagem.textContent = "Digite um logradouro";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {
                    logradouro.classList.remove("border-danger");
                    mensagem.textContent = "";
                }

                mensagem = document.getElementById("mensagemNumero");
                if (numero.value == null || numero.value.trim() == "") {
                    numero.classList.add("border-danger");
                    mensagem.textContent = "Digite um número";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {
                    numero.classList.remove("border-danger");
                    mensagem.textContent = "";
                }

                mensagem = document.getElementById("mensagemBairro");
                if (bairro.value == null || bairro.value.trim() == "") {
                    bairro.classList.add("border-danger");
                    mensagem.textContent = "Digite um bairro";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {
                    bairro.classList.remove("border-danger");
                    mensagem.textContent = "";
                }

                mensagem = document.getElementById("mensagemCidade");
                if (cidade.value == null || cidade.value.trim() == "") {
                    cidade.classList.add("border-danger");
                    mensagem.textContent = "Digite o nome da sua cidade";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {
                    cidade.classList.remove("border-danger");
                    mensagem.textContent = "";
                }

                mensagem = document.getElementById("mensagemCep");
                if (cep.value == null || cep.value.trim() == "") {
                    cep.classList.add("border-danger");
                    mensagem.textContent = "Digite o cep de sua cidade";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else if (cep.value.length < 9) {
                    cep.classList.remove("border-danger");
                    mensagem.textContent = "";

                    cep.classList.add("border-danger");
                    mensagem.textContent = "Deve conter 8 digitos";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {
                    cep.classList.remove("border-danger");
                    mensagem.textContent = "";

                }

                mensagem = document.getElementById("mensagemUf");
                if (uf.value == "Selecione..." || uf.value.trim() == "") {
                    uf.classList.add("border-danger");
                    mensagem.textContent = "Selecione sua UF";
                    mensagem.style.fontSize = "12px";

                    valido = false;

                } else {

                    uf.classList.remove("border-danger");
                    mensagem.textContent = "";

                }

                return valido;
            }
        </script>


        <script>


            document.addEventListener("readystatechange", function () {
                listarFuncionarios();
            });


            function excluirFuncionario(id) {

                var btnExcluir = document.getElementById("botaoExcluir")
                btnExcluir.name = id;
            }

            function confirmarExclusao(id) {
                fetch(host+"/api/funcionarios/" + id,
                    {
                        method: 'DELETE'
                    })
                    .then(response => {

                        if (response.ok) {

                            mostrarMensagem("success", "Funcionario excluído");
                            listarFuncionarios();
                        } else {

                            if (response.status == '403' || response.status == '400') {

                                window.location.href = host+"/login";
                            } else {

                                mostrarMensagem("danger", error.message);
                            }
                        }
                    })
                    .catch(error => { });
            }

            function mostrarMensagem(tipo, mensagem) {
                var alert = document.getElementById("alert");
                alert.innerHTML = '';
                alert.innerHTML =

                    '<div class="alert alert-' + tipo + ' alert-dismissible fade show" role = "alert">' +
                    mensagem +
                    '<button type = "button" class="close" data-dismiss="alert" aria-label="Close">' +
                    '<span aria-hidden="true">&times;</span></button> </div>'

                    ;


            }

            function listarFuncionarios() {
                // Coloque o código da sua função aqui
                fetch(host+"/api/funcionarios")
                    .then(response => {

                        if (response.ok) {
                            response.json().then(funcionarios => {

                                rederizarTabela(funcionarios);
                            })
                        } else {
                            response.json().then(response => {

                                if (response.StatusCode == "400") {

                                    limparTabela();
                                    mostrarMensagem("warning", response.message);
                                }
                            })
                        }
                    })
                    .catch(error => {
                        console.log(error);
                        // console.error('Erro:', error);
                    });
            }

            function limparTabela() {

                const table = document.getElementById('tabela-funcionarios');
                const tbody = table.querySelector('tbody');
                // Limpa o conteúdo atual da tabela
                tbody.innerHTML = '';

            }


            function rederizarTabela(data) {

                const table = document.getElementById('tabela-funcionarios');
                const tbody = table.querySelector('tbody');

                limparTabela();

                // Loop pelos dados e cria uma nova linha para cada entrada
                data.forEach(funcionario => {
                    const row = document.createElement('tr');
                    var endereco = (funcionario.endereco.logradouro) + ", " + "Nº " + funcionario.endereco.numero + ", " + funcionario.endereco.bairro + ", " + (funcionario.endereco.complemento || "sem complemento")
                        + ", " + funcionario.endereco.cidade + "/" + funcionario.endereco.uf + ", cep: " + funcionario.endereco.cep;

                    endereco = endereco.split(',');
                    row.innerHTML = `
                     <td id="${funcionario.id}" style="display:none;">${endereco}</td>
                     <td>${funcionario.nome}</td>
                     <td>${funcionario.cargoNome}</td>
                     <td>R$ ${funcionario.salario.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.')},00</td >
                     <td>${funcionario.departamentoNome}</td >
                     <td> 
                            <div class="dropdown dropleft">
                                <button class="btn btn-secondary" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="material-icons">remove_red_eye</i>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="max-width: 800px; max-height:300px">
                                        <div class="px-3">  ${endereco[0]}, ${endereco[1]}, ${endereco[2]}  </div>
                                        <div class="px-3">  ${endereco[3]}, ${endereco[4]}, ${endereco[5]}  </div>
                                    </div>
                                </button>
                            </div>
                     </td>
                     <td>
                        <button id = "${funcionario.id}" type="button" class="btn btn-info" data-toggle="modal" data-target="#modalEditar" onclick = "criarFormulárioModal(this.id)">  <i class="material-icons">edit</i></button>
                        <button id = "${funcionario.id}" onclick="excluirFuncionario(this.id)" type="button" class="btn btn-danger"  data-toggle="modal" data-target="#confirmarExclusao" >  <i class="material-icons">delete</i></button>
                     </td>

                                           `;
                    tbody.appendChild(row);

                });
            }




        </script>

        <script>
            function adicionarDadosFormulario(id) {

           

                fetch(host+"/api/funcionarios/" + id)
                    .then(response => {
                        if (response.ok) {
                            response.json().then(funcionario => {

                                adicionarDadosCamposFormulario(funcionario);
                            });

                        } else {
                            alert("um erro aconteceu ao carregar a página");
                        }

                    })
                    .catch(error => {

                        console.error('Erro:', error);
                    });
            }

            function adicionarDadosCamposFormulario(funcionario) {

                document.getElementById('id').value = funcionario.id;
                document.getElementById('nome').value = funcionario.nome;
                document.getElementById('salario').value = funcionario.salario;
                document.getElementById(funcionario.cargoId).selected = true;
                document.getElementById('enderecoId').value = funcionario.endereco.id;
                document.getElementById('logradouro').value = funcionario.endereco.logradouro;
                document.getElementById('numero').value = funcionario.endereco.numero;
                document.getElementById('bairro').value = funcionario.endereco.bairro;
                document.getElementById('cidade').value = funcionario.endereco.cidade;
                document.getElementById('cep').value = funcionario.endereco.cep;
                document.getElementById(funcionario.endereco.uf).selected = true;
            }
        </script>



        <script>
            function adicionarCargos(cargos) {
                var select = document.getElementById('cargo');
                select.innerHTML = '';
                var lin = document.createElement('option')
                lin.textContent = "Selecione...";
                lin.selected = true;
                lin.disabled = true;
                select.appendChild(lin);

                cargos.forEach(cargo => {

                    lin = document.createElement('option');
                    lin.textContent = cargo.nome;
                    lin.value = cargo.id;
                    lin.id = cargo.id;
                    select.appendChild(lin);

                });

            }

            function criarFormulárioModal(id) {

                var modalBody = document.getElementById('modalBody');
                modalBody.innerHTML = `
                
                                    <form style="width: 100%; display: flex; flex-direction: column; align-items: end; margin-right: 100px;">
                                        <div id='alert' style='width: 95%;'></div>
                                        <div style='width: 95%;'>
                                            <div class='col'>
                                                <input type='text' id='id' style='display: none;'>
                                            </div>
                                            <div class='row'>
                                                <div class='col'>
                                                    <label for='nome'>Nome</label>
                                                    <input type='text' id='nome' class='form-control' placeholder='Digite seu nome'>
                                                    <p class='text-danger' id='mensagemNome'> </p>
                                                </div>
                                            </div>
                                            <p></p>
                                            <div class='row'>
                                                <div class='col'>
                                                    <label for='salario'>Salario</label>
                                                    <input type='text' id='salario' class='form-control' placeholder='Digite seu salario' />
                                                    <p class='text-danger' id='mensagemSalario'> </p>
                                                </div>
                                                <div class='col'>
                                                    <label for='cargo'>Cargo</label>
                                                    <select id='cargo' name='' class='form-control'>
                                                    </select>
                                                    <p class='text-danger' id='mensagemCargo'> </p>
                                                </div>
                                            </div>
                                            <p></p>
                                            <div class='col'>
                                                <input type='text' id='enderecoId' style='display: none;'>
                                            </div>
                                            <div class='row'>
                                                <div class='col'>
                                                    <label for='logradouro'>Logradouro</label>
                                                    <input type='text' id='logradouro' class='form-control' placeholder='Digite sua rua'>
                                                    <p class='text-danger' id='mensagemLogradouro'> </p>
                                                </div>
                                                <div class='col'>
                                                    <label for='numero'>Número</label>
                                                    <input type='number' id='numero' class='form-control' placeholder='Digite seu número'>
                                                    <p class='text-danger' id='mensagemNumero'> </p>
                                                </div>
                                            </div>
                                            <p></p>
                                            <div class='row'>
                                                <div class='col'>
                                                    <label for='bairro'>Bairro</label>
                                                    <input type='text' id='bairro' class='form-control' placeholder='Digite seu bairro '>
                                                    <p class='text-danger' id='mensagemBairro'> </p>
                                                </div>
                                                <div class='col'>
                                                    <label for='cidade'>Cidade</label>
                                                    <input type='text' id='cidade' class='form-control' placeholder='Digite sua cidade'>
                                                    <p class='text-danger' id='mensagemCidade'> </p>
                                                </div>
                                            </div>
                                            <p></p>
                                            <div class='row'>
                                                <div class='col'>
                                                    <label for='cep'>Cep</label>
                                                    <input type='text' id='cep' class='form-control' placeholder='Digite seu cep' onkeypress='$(this).mask("00000-000")'>
                                                    <p class='text-danger' id='mensagemCep'> </p>
                                                </div>
                                                <div class='col'>
                                                    <label for='uf'>UF</label>
                                                    <select id='uf' name='uf' class='form-control'>
                                                    </select>
                                                    <p class='text-danger' id='mensagemUf'> </p>
                                                </div>
                                                <p></p>
                                            </div>
                                        </div>
                                        <p></p>
                                        <div class='modal-footer'>
                                            <button type='button' class='btn btn-secondary' data-dismiss='modal'>Fechar</button>
                                            <button type='button' class='btn btn-primary' onclick='atualizarFuncionario()'>Atualizar</button>
                                        </div>
                                    </form>`;


                // Selecionar o campo de entrada de salário pelo ID
                var salarioInput = document.getElementById('salario').addEventListener('input', mascaraSalario);

                buscarDados(id);




            }

            function buscarDados(id) {

                buscarCargos(id);

                return true;
            }

            function buscarCargos(id) {

                fetch(host+"/api/cargos")
                    .then(response => {
                        if (response.ok) {
                            response.json().then(cargos => {

                                adicionarCargos(cargos);
                                buscarUfs(id);
                            });

                        } else {
                            alert("um erro aconteceu ao carregar a página");
                        }

                    })


                    .catch(error => {

                        console.error('Erro:', error);
                    });



            }
            function buscarUfs(id) {

                fetch(host+"/ufs")
                    .then(response => {
                        if (response.ok) {
                            response.json().then(ufs => {

                                adicionarUfs(ufs);
                                adicionarDadosFormulario(id);


                            });

                        } else {
                            alert("um erro aconteceu ao carregar a página");
                        }

                    })


                    .catch(error => {

                        console.error('Erro:', error);
                    });


            }
            function adicionarUfs(ufs) {
                var tagUfs = document.getElementById('uf');

                tagUfs.innerHTML = '';

                var lin = document.createElement('option');
                lin.disabled = true;
                lin.selected = true;
                lin.textContent = "Selecione..."
                tagUfs.appendChild(lin);

                ufs.forEach(uf => {
                    lin = document.createElement('option');
                    lin.textContent = uf;
                    lin.value = uf;
                    lin.id = uf;
                    tagUfs.appendChild(lin);
                });


            }

        </script>

        <!-- mascara salario -->
        <script>
            function mascaraSalario(event) {
                var input = event.target;
                var value = input.value.replace(/\D/g, ''); // Remove todos os não-dígitos

                // Formata o valor como moeda brasileira
                var formattedValue = "R$ " + (value / 100).toLocaleString("pt-BR", {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });

                input.value = formattedValue;
            }


        </script>
    </div>

</body>

</html>